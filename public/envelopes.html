<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
	<title>Personal Budget</title>
	<!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script>
		const postData = async () => {
			const dName = document.getElementById("name");
			const dAmount = document.getElementById("amount");
			const data = {name: dName, amount: dAmount};
			console.log(data);
			try {
				const response = await fetch("http://localhost:3000/envelopes", {
					method: "POST",
					body: JSON.stringify(data),
					headers: {
						"Content-Type": "application/json"
					}
				});
				if(response.ok) {
					const jsonResponse = await response.json();
					console.log(jsonResponse);
				}
			} catch(e) {
				console.log(e);
			}
		}
	</script>
</head>
<body>
  <div id="wrapper">
	  <header>
			
		</header>
		<main>
      <ul id="envelopes-list" class="list-group"></ul>
      <form action="/envelopes" method="post">
        <input type="text" name="name" /><br/>
		    <input type="text" name="amount" /><br/>
		    <input type="submit" onclick="postData()"value="Submit" />
	    </form>
		</main>
	</div>
	<script>
		document.body.onchange = () => {
			const ulList = document.getElementById("envelopes-list");
			const ulListChildren = ulList.children;
			console.log(ulListChildren);
		}
	</script>
	<script>
    const list = document.getElementById("envelopes-list");
		const getData = async () => {
		  try {
				const response = await fetch("http://localhost:3000/envelopes/list");
				if(response.ok) {
					const jsonResponse = await response.json();
					console.log(jsonResponse);
					return jsonResponse;
				}
			} catch(e) {
				console.log(e);
			}
		}
		const items = getData().then(jsonResponse => {list.innerHTML = jsonResponse.data});
	</script>
</body>
</html>